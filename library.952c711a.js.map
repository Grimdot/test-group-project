{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,8EAWA,MAAMC,EAAc,IAAI,E,WAAAC,SAKxB,MAyBMC,EAAe,MACnB,EAAAC,EAAAC,gBACA,MAAMC,EAAMC,KAAKC,MAAMC,aAAaC,QAAQ,iBAC5C,IAAKJ,EAGH,OAFAP,EAAAY,KAAKC,QAAQC,mBAAmB,aAhCT,uEAiCvB,EAAAT,EAAAU,eAIFC,QAAQC,IAAIf,EAAYgB,kBAAkBX,IAAMY,MAAKC,KACnD,EAAAC,EAAAC,eAAcF,IACd,EAAAf,EAAAU,cAAa,GACb,EAGEQ,EAAa,MACjB,EAAAC,EAAAC,eAAcN,MAAKC,IACjBM,QAAQC,IAAIP,EAAE,KAEhB,EAAAf,EAAAC,gBACA,MAAMC,EAAMC,KAAKC,MAAMC,aAAaC,QAAQ,eAC5C,IAAKJ,EAGH,OAFAP,EAAAY,KAAKC,QAAQC,mBAAmB,aAlDT,uEAmDvB,EAAAT,EAAAU,eAIFC,QAAQC,IAAIf,EAAYgB,kBAAkBX,IAAMY,MAAKC,KACnD,EAAAC,EAAAC,eAAcF,IACd,EAAAf,EAAAU,cAAa,GACb,EAGJQ,IAEAvB,EAAAY,KAAKC,QAAQe,iBAAiB,SAhDHC,IACzB,MAAMC,EAASD,EAAEE,OAAOC,WAAWC,QAAQC,GAEtCJ,GAIL5B,EAAYiC,cAAcL,GAAQX,MAAKC,IACrCgB,EAAAC,MAAMC,KAAKF,EAAAG,iBACX,EAAAH,EAAAI,aAAYpB,EAAEqB,KAAK,GACnB,IAuCJzC,EAAAY,KAAK8B,WAAWd,iBAAiB,SA7DPC,IACnBA,EAAEE,OAAOE,UAGgB,eAA1BJ,EAAEE,OAAOE,QAAQU,MACnBvC,IAE4B,aAA1ByB,EAAEE,OAAOE,QAAQU,MACnBpB,IAAY,KAuDhB,EAAAC,EAAAoB,UAEA,EAAApB,EAAAqB","sources":["src/js/library.js"],"sourcesContent":["import { refs } from './refs';\nimport { spinnerStart, spinnerStop } from './spinner';\nimport { lybraryRender } from './render';\nimport { modal, renderModal, afterModalShow } from './modal';\nimport Notiflix from 'notiflix';\n\nimport { getUserData, greet, MakeAuthBtn } from './firebase';\nimport { getAuth } from 'firebase/auth';\n\nimport moviesAPI from './moviesAPI';\n\nconst filmService = new moviesAPI();\n\nconst emptyStorageMarkup = `<p class = 'storage-error'>This storage is empty... Yet :)</p>`;\nlet uid = null;\n\nconst onHeaderBtnsClick = e => {\n  if (!e.target.dataset) {\n    return;\n  }\n  if (e.target.dataset.type === 'watchedBtn') {\n    watchedFetch();\n  }\n  if (e.target.dataset.type === 'queueBtn') {\n    queueFetch();\n  }\n};\n\nconst handleGalleryClick = e => {\n  const filmId = e.target.parentNode.dataset.id;\n\n  if (!filmId) {\n    return;\n  }\n\n  filmService.fetchFilmById(filmId).then(r => {\n    modal.show(afterModalShow);\n    renderModal(r.data);\n  });\n};\n\nconst watchedFetch = () => {\n  spinnerStart();\n  const ids = JSON.parse(localStorage.getItem('watched-list'));\n  if (!ids) {\n    refs.gallery.insertAdjacentHTML('afterbegin', emptyStorageMarkup);\n    spinnerStop();\n    return;\n  }\n\n  Promise.all(filmService.fetcByMultipleIds(ids)).then(r => {\n    lybraryRender(r);\n    spinnerStop();\n  });\n};\n\nconst queueFetch = () => {\n  getUserData().then(r => {\n    console.log(r);\n  });\n  spinnerStart();\n  const ids = JSON.parse(localStorage.getItem('queue-list'));\n  if (!ids) {\n    refs.gallery.insertAdjacentHTML('afterbegin', emptyStorageMarkup);\n    spinnerStop();\n    return;\n  }\n\n  Promise.all(filmService.fetcByMultipleIds(ids)).then(r => {\n    lybraryRender(r);\n    spinnerStop();\n  });\n};\n\nqueueFetch();\n\nrefs.gallery.addEventListener('click', handleGalleryClick);\nrefs.headerBtns.addEventListener('click', onHeaderBtnsClick);\n\ngreet();\n\nMakeAuthBtn();\n"],"names":["$krGWQ","parcelRequire","$1cafa503bc57b7a0$var$filmService","default","$1cafa503bc57b7a0$var$watchedFetch","$04jNI","spinnerStart","ids","JSON","parse","localStorage","getItem","refs","gallery","insertAdjacentHTML","spinnerStop","Promise","all","fetcByMultipleIds","then","r","$1dkLo","lybraryRender","$1cafa503bc57b7a0$var$queueFetch","$2ix2C","getUserData","console","log","addEventListener","e","filmId","target","parentNode","dataset","id","fetchFilmById","$bTcpz","modal","show","afterModalShow","renderModal","data","headerBtns","type","greet","MakeAuthBtn"],"version":3,"file":"library.952c711a.js.map"}